$.fn.replicant=function(initialData){var model=$(this);model=$(model);var self=this;this.totalItems=0;this.model=$(".replicant-base",model).prop("outerHTML");this.container=model;$(".replicant-remove",model).hide();model.delegate(".replicant-add","click",function(){self.replicate();});model.delegate(".replicant-remove","click",function(){$(this).closest(".replicant-base").remove();});if(initialData.onRender){initialData.onRender();}this.replicate=function(value,ignoreAppend){console.log("base: ",this.model);if(!ignoreAppend){this.container.append(this.model);}$(".replicant-remove",this.container).show();$(".replicant-remove:last",this.container).hide();$(".replicant-add",this.container).not(":last").hide();if(value){for(var field in value){$('[name="'+field+'"]',$(".replicant-base:last",this.container)).attr("value",value[field]);console.log("campo: ",field,value[field],$('[name="'+field+'"]',$(".replicant-base",this.container)),$('[name="'+field+'"]',$(".replicant-base",this.container)).length);}}if(initialData.onRender){initialData.onRender();}};if(initialData&&initialData.values){for(var x=0;x<initialData.values.length;x++){this.replicate(initialData.values[x],(x==0));}}};